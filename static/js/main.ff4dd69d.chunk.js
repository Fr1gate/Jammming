(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(8),c=a.n(s),r=(a(15),a(2)),o=a(3),l=a(6),u=a(4),h=a(5),d=a(1),m=(a(16),a(17),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).search=a.search.bind(Object(d.a)(Object(d.a)(a))),a.handleTermChange=a.handleTermChange.bind(Object(d.a)(Object(d.a)(a))),a.handleClick=a.handleClick.bind(Object(d.a)(Object(d.a)(a))),a.handleKeyDown=a.handleKeyDown.bind(Object(d.a)(Object(d.a)(a))),a.state={term:""},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"search",value:function(e){this.props.onSearch(e)}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"handleClick",value:function(e){e.preventDefault(),this.search(this.state.term)}},{key:"handleKeyDown",value:function(e){13==e.keyCode&&this.search(this.state.term)}},{key:"render",value:function(){return i.a.createElement("form",{className:"SearchBar"},i.a.createElement("input",{placeholder:"Enter A Song, Album, or Artist",onChange:this.handleTermChange,onKeyDown:this.handleKeyDown}),i.a.createElement("button",{onClick:this.handleClick},"SEARCH"))}}]),t}(i.a.Component)),f=(a(18),a(19),a(20),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addTrack=a.addTrack.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"renderAction",value:function(){return!0===this.props.isRemoval?"-":"+"}},{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Track"},i.a.createElement("div",{className:"Track-information"},i.a.createElement("h3",null,this.props.track.name),i.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album)),i.a.createElement("a",{className:"Track-action",onClick:this.addTrack},this.renderAction()))}}]),t}(i.a.Component));f.defaultProps={track:{id:"defID",name:"defName",artist:"defArtist",album:"defAlbum"},isRemoval:!1};var p=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"TrackList"},this.props.tracks.map(function(t){return i.a.createElement(f,{key:t.id,track:t,isRemoval:e.props.isRemoval,onAdd:e.props.onAdd})}))}}]),t}(i.a.Component);p.defaultProps={tracks:[{name:"default Name",artist:"default Artist",album:"default Album",id:"default ID"}]};var b=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"SearchResults"},i.a.createElement("h2",null,"Results"),i.a.createElement(p,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:!1}))}}]),t}(i.a.Component),k=(a(21),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleNameChange=a.handleNameChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Playlist"},i.a.createElement("input",{defaultValue:"New Playlist",onChange:this.handleNameChange}),i.a.createElement(p,{tracks:this.props.playlist,isRemoval:!0,onAdd:this.props.onAdd}),i.a.createElement("a",{className:"Playlist-save",onClick:this.props.onSave},"SAVE TO SPOTIFY"))}}]),t}(i.a.Component));k.defaultProps={playlist:[{}]};a(22);var v,y,O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getClasses=a.getClasses.bind(Object(d.a)(Object(d.a)(a))),a.handleClick=a.handleClick.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"getClasses",value:function(){var e="info-window";return this.props.visible&&(e+=" visible"),e}},{key:"handleClick",value:function(){this.props.clickOK()}},{key:"render",value:function(){return i.a.createElement("div",{className:this.getClasses()},i.a.createElement("p",null,this.props.info),i.a.createElement("button",{onClick:this.handleClick},"OK"))}}]),t}(i.a.Component),j={getAccessToken:function(){if(v)return v;if(window.location.href.match(/access_token=([^&]*)/)&&window.location.href.match(/expires_in=([^&]*)/))return v=window.location.href.match(/access_token=([^&]*)/)[1],y=window.location.href.match(/expires_in=([^&]*)/)[1],window.setTimeout(function(){return v=""},1e3*y),window.history.pushState("Access Token",null,"/"),v;var e="https://accounts.spotify.com/authorize?client_id=".concat("a95d5b29ba8e42b3b73a0a4bc23f1535","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("https://fr1gate.github.io/Jammming/");window.location=e},search:function(e,t){var a=this.getAccessToken(),n={headers:{Authorization:"Bearer ".concat(a)}};return fetch("https://api.spotify.com/v1/search?type=track&q=".concat(e),n).then(function(e){if(e.ok)return e.json();t(e.statusText)}).then(function(e){return e.tracks.items?e.tracks.items.map(function(e){return{name:e.name,artist:e.artists[0].name,album:e.album.name,id:e.id,uri:e.uri}}):[]})},savePlaylist:function(e,t,a){if(!e||!t||t.length<1)a("Add tracks and set tracklist name!");else{v||(v=this.getAccessToken());var n,i={Authorization:"Bearer ".concat(v)};fetch("https://api.spotify.com/v1/me",{headers:i}).then(function(e){if(e.ok)return e.json();a(e.statusText)}).then(function(s){return n=s.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists"),{headers:i,method:"POST",body:JSON.stringify({name:e})}).then(function(e){if(e.ok)return e.json();a(e.statusText)}).then(function(e){var s=e.id;return fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists/").concat(s,"/tracks"),{headers:i,method:"POST",body:JSON.stringify({uris:t})}).then(function(e){return a(e.statusText||"Playlist created")})})})}}},g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={searchResults:[],playlist:[],playlistName:"Default Playlist Name",infoWindowVisible:!1,infoWindowInfo:"Default info"},a.addTrack=a.addTrack.bind(Object(d.a)(Object(d.a)(a))),a.removeTrack=a.removeTrack.bind(Object(d.a)(Object(d.a)(a))),a.updatePlaylistName=a.updatePlaylistName.bind(Object(d.a)(Object(d.a)(a))),a.savePlaylist=a.savePlaylist.bind(Object(d.a)(Object(d.a)(a))),a.search=a.search.bind(Object(d.a)(Object(d.a)(a))),a.toggleInfoWindow=a.toggleInfoWindow.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"toggleInfoWindow",value:function(e){e&&this.setState({infoWindowInfo:e}),this.setState({infoWindowVisible:!this.state.infoWindowVisible})}},{key:"addTrack",value:function(e){if(!this.state.playlist.find(function(t){return t.id===e.id})){var t=this.state.playlist;t.push(e),this.setState({playlist:t})}}},{key:"removeTrack",value:function(e){var t=this.state.playlist.filter(function(t){return t.id!==e.id});this.setState({playlist:t})}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"savePlaylist",value:function(){var e=this.state.playlist.map(function(e){return e.uri});j.savePlaylist(this.state.playlistName,e,this.toggleInfoWindow)}},{key:"search",value:function(e){var t=this;j.search(e,this.toggleInfoWindow).then(function(e){t.setState({searchResults:e})})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(O,{visible:this.state.infoWindowVisible,info:this.state.infoWindowInfo,clickOK:this.toggleInfoWindow}),i.a.createElement("h1",null,"Ja",i.a.createElement("span",{className:"highlight"},"mmm"),"ing"),i.a.createElement("div",{className:"App"},i.a.createElement(m,{onSearch:this.search}),i.a.createElement("div",{className:"App-playlist"},i.a.createElement(b,{searchResults:this.state.searchResults,onAdd:this.addTrack}),i.a.createElement(k,{playlist:this.state.playlist,onAdd:this.removeTrack,onNameChange:this.updatePlaylistName,onSave:this.savePlaylist}))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.ff4dd69d.chunk.js.map